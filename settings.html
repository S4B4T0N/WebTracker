<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebTracker Settings</title>
    <style>
      :root {
        --bg: #f2f2f7;
        --fg: #1c1c1e;
        --muted: rgba(60, 60, 67, 0.6);
        --divider: rgba(60, 60, 67, 0.18);
        --card: #ffffff;
        --cardBorder: rgba(60, 60, 67, 0.18);
        --blue: #007aff;
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #000000;
          --fg: #ffffff;
          --muted: rgba(235, 235, 245, 0.6);
          --divider: rgba(84, 84, 88, 0.65);
          --card: #1c1c1e;
          --cardBorder: rgba(84, 84, 88, 0.65);
          --blue: #0a84ff;
        }
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, Segoe UI, Roboto, Arial, sans-serif;
        margin: 0;
        width: 440px;
        min-width: 440px;
        max-width: 520px;
        background: var(--bg);
        color: var(--fg);
      }
      .wrap { padding: 14px 12px 12px; }
      .title {
        font-size: 15px;
        font-weight: 700;
        letter-spacing: 0.2px;
        margin-bottom: 12px;
      }
      .chartCard { margin-bottom: 12px; }
      .chartWrap { display: grid; grid-template-columns: 120px 1fr; gap: 12px; align-items: center; }
      .pieCanvas { width: 120px; height: 120px; display: block; }
      .chartHead { display: flex; align-items: baseline; justify-content: space-between; gap: 10px; margin-bottom: 6px; }
      .chartTotal { font-size: 12px; color: var(--muted); font-variant-numeric: tabular-nums; white-space: nowrap; }
      .legend { display: grid; gap: 8px; }
      .legendRow { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
      .legendLeft { display: inline-flex; align-items: center; gap: 8px; min-width: 0; }
      .leader { flex: 1 1 auto; border-bottom: 1px dotted var(--divider); margin: 0 10px; transform: translateY(-2px); opacity: 0.9; }
      .dot { width: 10px; height: 10px; border-radius: 999px; flex: 0 0 auto; }
      .legendHost { font-size: 12px; color: var(--fg); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 190px; }
      .legendTime { font-size: 12px; color: var(--muted); font-variant-numeric: tabular-nums; flex: 0 0 auto; width: 74px; text-align: right; }
      .pager { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
      .pagerInfo { font-size: 12px; color: var(--muted); font-variant-numeric: tabular-nums; }
      .pagerBtns { display: inline-flex; gap: 8px; }
      .btn.small { padding: 6px 8px; border-radius: 10px; font-size: 12px; }
      .btn:disabled { opacity: 0.45; cursor: default; }
      .grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
      .item {
        background: var(--card);
        border-radius: 14px;
        padding: 12px;
        border: 1px solid var(--cardBorder);
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04);
      }
      .k { font-size: 12px; color: var(--muted); }
      .v { font-size: 13px; font-weight: 700; margin-top: 4px; word-break: break-all; }
      .divider { height: 1px; background: var(--divider); width: 100%; }
      .footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        border-top: 1px solid var(--divider);
      }
      @media (prefers-color-scheme: dark) {
        .footer {
          background: rgba(28, 28, 30, 0.72);
        }
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: 0;
        background: transparent;
        color: var(--blue);
        font-weight: 600;
        font-size: 13px;
        padding: 8px 10px;
        border-radius: 12px;
        cursor: pointer;
      }
      .btn:hover { background: rgba(0, 122, 255, 0.10); }
      .btn:active { background: rgba(0, 122, 255, 0.16); }
      .btn.destructive { color: #ff3b30; }
      .btn.destructive:hover { background: rgba(255, 59, 48, 0.10); }
      .btn.destructive:active { background: rgba(255, 59, 48, 0.16); }

      .iconBtn {
        width: 38px;
        height: 38px;
        justify-content: center;
        font-size: 18px;
        border-radius: 999px;
      }
      .panel { display: none; padding-top: 10px; }
      .panel.open { display: block; }
      select {
        width: 100%;
        font-size: 13px;
        padding: 10px 10px;
        border-radius: 12px;
        border: 1px solid var(--cardBorder);
        background: rgba(120, 120, 128, 0.10);
        color: var(--fg);
        outline: none;
      }

      select option {
        color: var(--fg);
        background: var(--card);
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="title">WebTracker</div>

      <div class="item chartCard" aria-label="Site analytics">
        <div class="chartWrap">
          <canvas id="pieChart" class="pieCanvas" width="240" height="240"></canvas>
          <div>
            <div class="chartHead">
              <div class="k" data-i18n="analytics_title">Website analytics</div>
              <div class="chartTotal" id="totalTime">-</div>
            </div>
            <div class="legend" id="legend"></div>
            <div class="pager" id="pager" style="display:none;">
              <div class="pagerInfo" id="pagerInfo">-</div>
              <div class="pagerBtns">
                <button class="btn small" id="prevPage" type="button" data-i18n="prev">Prev</button>
                <button class="btn small" id="nextPage" type="button" data-i18n="next">Next</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid">
        <div class="item">
          <div class="k" data-i18n="site">Site</div>
          <div class="v" id="site">-</div>
        </div>
        <div class="item">
          <div class="k" data-i18n="speed">Speed</div>
          <div class="v" id="speed">-</div>
        </div>
        <div class="item">
          <div class="k" data-i18n="status">Status</div>
          <div class="v" id="status">-</div>
        </div>
        <div class="item">
          <div class="k" data-i18n="ping">Ping</div>
          <div class="v" id="ping">-</div>
        </div>
      </div>

      <div class="panel" id="settingsPanel">
        <div class="item">
          <div class="k" data-i18n="language">Language</div>
          <div class="v" style="margin-top:8px; font-weight:400;">
            <select id="language">
              <option value="en">English</option>
              <option value="de">Deutsch</option>
              <option value="fr">Français</option>
              <option value="es">Español</option>
              <option value="it">Italiano</option>
              <option value="sk">Slovenčina</option>
            </select>
          </div>
        </div>

        <div class="item">
          <div class="k" data-i18n="theme">Theme</div>
          <div class="v" style="margin-top:8px; font-weight:400;">
            <select id="themeMode">
              <option value="auto" data-i18n="theme_auto">Auto</option>
              <option value="dark" data-i18n="theme_dark">Dark</option>
              <option value="light" data-i18n="theme_light">Light</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <button class="btn destructive" id="quitBtn" type="button" data-i18n="quit">Quit</button>
      <button class="btn iconBtn" id="settingsBtn" type="button" aria-label="Settings" data-i18n-aria-label="settings">⚙</button>
    </div>

    <script src="settings.js"></script>
  </body>
</html>
